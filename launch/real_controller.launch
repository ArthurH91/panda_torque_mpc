<?xml version="1.0" ?>
<launch>
  <arg name="robot" default="panda" doc="choose your robot. Possible values: [panda, fr3]"/>
  <arg name="arm_id" default="$(arg robot)" />

  <arg name="record" default="false"/>
  <arg name="expe_name" default="expe"/>
  <arg name="controller" default="model_pinocchio_vs_franka_controller" doc="Choose controller to be launched. Check config/controller_configs.yaml to see which one are available." />

  <rosparam command="load" file="$(find panda_torque_mpc)/config/controller_configs.yaml" subst_value="true" />
  <!-- Dump controller related parameters for this experiment in a yaml file with similar name as bag file -->
  <group if="$(arg record)">
    <rosparam command="dump" file="$(find panda_torque_mpc)/bags/$(arg controller)_$(arg expe_name).yaml" ns="$(arg controller)" subst_value="true" />
  </group>
  

  <!-- Start the node interfacing with libfranka to control the robot -->
  <include file="$(find franka_control)/launch/franka_control.launch" pass_all_args="true"/>

  <!-- Spawn the desired controller -->
  <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen"  args="model_pinocchio_vs_franka_controller"/>
</launch>
