<launch>
  <arg name="record" default="false"/>
  <arg name="arm_id" default="panda"/>
  <arg name="pkg_path" value="$(find panda_torque_mpc)"/> 
  <rosparam file="$(find panda_torque_mpc)/config/controller_configs.yaml" subst_value="true" />

  <arg name="controller"  default=" " doc="Choose controller to be launched. Check config/controller_configs.yaml to see which one are available." />

  <!-- spawns the controller after "initialized" topic tells us the robot is initialized  -->
  <node pkg="controller_manager"
        type="spawner"
        name="$(arg arm_id)_torque_controller_spawner"
        respawn="false" output="screen"
        args="--wait-for initialized $(arg controller)"
  >
  </node>

  <node pkg="rosbag" type="record" name="rosbag_record_cam"
        args="record -o $(arg pkg_path)/bags/$(arg controller) 
                    /$(arg controller)/joint_configurations_comparison 
                    /$(arg controller)/joint_velocities_comparison 
                    /$(arg controller)/joint_torques_comparison"
        if="$(arg record)" 
  />
</launch>